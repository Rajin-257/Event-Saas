<!DOCTYPE html>
<html>

<head>
  <%- include("../partials/title-meta.ejs", {title: "Change Password" }) %>
    <%- include('../partials/head-css.ejs') %>
</head>

<body>
  <!-- Begin page -->
  <div class="wrapper">

    <%- include('../partials/menu.ejs') %>

      <!-- ============================================================== -->
      <!-- Start Page Content here -->
      <!-- ============================================================== -->
      <div class="page-content">

        <div class="page-container">

          <%- include("../partials/page-title.ejs", {subtitle: "User Settings" , title: "Change Password" }) %>

            <div class="row">
              <div class="col-lg-6 mx-auto">
                <div class="card">
                  <div class="card-body">
                    <h5 class="mt-0 font-14 mb-4">Update Your Password</h5>

                    <% if(success_msg && success_msg.length> 0){ %>
                      <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <%= success_msg %>
                          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                      </div>
                      <% } %>

                        <% if(error_msg && error_msg.length> 0){ %>
                          <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <%= error_msg %>
                              <button type="button" class="btn-close" data-bs-dismiss="alert"
                                aria-label="Close"></button>
                          </div>
                          <% } %>

                            <% if(error && error.length> 0){ %>
                              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                <%= error %>
                                  <button type="button" class="btn-close" data-bs-dismiss="alert"
                                    aria-label="Close"></button>
                              </div>
                              <% } %>


                                <form action="/user/change-password?_method=PUT" method="POST" id="passwordForm">
                                  <div class="mb-3">
                                    <label for="currentPassword" class="form-label">Current Password</label>
                                    <div class="input-group">
                                      <input type="password" class="form-control" id="currentPassword"
                                        name="currentPassword" placeholder="Enter your current password" required>
                                    </div>
                                  </div>

                                  <div class="mb-3">
                                    <label for="newPassword" class="form-label">New Password</label>
                                    <div class="input-group">
                                      <input type="password" class="form-control" id="newPassword" name="newPassword"
                                        placeholder="Enter your new password" required>
                                    </div>
                                    <div class="form-text">Password must be at least 6 characters long and include
                                      uppercase, lowercase, and numbers.</div>
                                    <div id="passwordError" class="invalid-feedback"></div>
                                  </div>

                                  <div class="mb-4">
                                    <label for="confirmPassword" class="form-label">Confirm New Password</label>
                                    <div class="input-group">
                                      <input type="password" class="form-control" id="confirmPassword"
                                        name="confirmPassword" placeholder="Confirm your new password" required>
                                    </div>
                                    <div id="confirmError" class="invalid-feedback"></div>
                                  </div>

                                  <div class="d-flex justify-content-between">
                                    <a href="/user/profile" class="btn btn-outline-secondary">
                                      <i class="fas fa-arrow-left me-2"></i>Back to Profile
                                    </a>
                                    <button type="submit" class="btn btn-primary">
                                      <i class="fas fa-key me-2"></i>Update Password
                                    </button>
                                  </div>
                                </form>
                              </div>
                            </div>
                          </div>
                        </div>
            <!-- end row -->

        </div> <!-- container -->

        <%- include('../partials/footer.ejs') %>

      </div>

      <!-- ============================================================== -->
      <!-- End Page content -->
      <!-- ============================================================== -->

  </div>
  <!-- END wrapper -->

  <%- include('../partials/customizer.ejs') %>

  <%- include('../partials/footer-scripts.ejs') %>

  <!-- Password validation script -->
  <script src="../../../backend/js/validation/user.js"></script>
</body>

</html>